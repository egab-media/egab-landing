<!doctype html>
<html lang="en">

<head>

    <!--====== Required meta tags ======-->
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!--====== Title ======-->
    <title>Egab - inspiring stories for global audiences</title>

    <!--====== Favicon Icon ======-->
    <link rel="shortcut icon" href="assets/images/favicon.ico" type="image/png">

    <!--====== Bootstrap css ======-->
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">

    <!--====== Fontawesome css ======-->
    <link rel="stylesheet" href="assets/css/font-awesome.min.css">

    <!--====== flaticon css ======-->
    <link rel="stylesheet" href="assets/css/flaticon.css">

    <!--====== odometer for number transitions css ======-->
    <link rel="stylesheet" href="assets/css/odometer.min.css">

    <!--====== Magnific Popup css ======-->
    <link rel="stylesheet" href="assets/css/magnific-popup.css">

    <!--====== animate css ======-->
    <link rel="stylesheet" href="assets/css/animate.min.css">

    <!--====== Slick css ======-->
    <link rel="stylesheet" href="assets/css/slick.css">

    <!--====== Default css ======-->
    <link rel="stylesheet" href="assets/css/default.css">

    <!--====== Style css ======-->
    <link rel="stylesheet" href="assets/css/style.css">


</head>

<body>

    <!-- PRELOADER -->
    <div class="preloader">
        <div class="lds-ellipsis">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </div>
    <!-- END PRELOADER -->

    <!--====== side menu PART START ======-->

    <div class="side-menu__block">
        <div class="side-menu__block-overlay custom-cursor__overlay">
            <div class="cursor"></div>
            <div class="cursor-follower"></div>
        </div><!-- /.side-menu__block-overlay -->
        <div class="side-menu__block-inner ">
            <div class="side-menu__top justify-content-end">

                <a href="#" class="side-menu__toggler side-menu__close-btn"><img src="assets/images/close.png" alt=""></a>
            </div><!-- /.side-menu__top -->


            <nav class="mobile-nav__container">
                <!-- content is loading via js -->
            </nav>
            <div class="side-menu__sep"></div><!-- /.side-menu__sep -->
        </div><!-- /.side-menu__block-inner -->
    </div><!-- /.side-menu__block -->

    <!--====== side menu PART ends ======-->

    <!--====== HEADER PART START ======-->
    <header id="home" class="header-area header-v1-area">
        <div class="header-nav">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="navigation">
                            <nav class="navbar navbar-expand-lg navbar-light ">
                                <a class="navbar-brand" href="index.html"><img src="assets/images/logo.png" alt=""></a> <!-- logo -->
                                <a class="navbar-brand-2" href="index.html"><img src="assets/images/logo.png" alt=""></a> <!-- logo -->
                                <span class="side-menu__toggler"><i class="fa fa-bars"></i></span><!-- /.side-menu__toggler -->

                                <div class="collapse navbar-collapse sub-menu-bar main-nav__main-navigation" id="navbarSupportedContent">
                                    <ul class="navbar-nav m-auto main-nav__navigation-box">
                                        <li class="nav-item active">
                                            <a class="nav-link page-scroll" href="./index.html">Home</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link page-scroll" href="./index.html#editors">For Editors</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link page-scroll" href="./index.html#journalists">For Journalists</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link page-scroll" href="./index.html#whyEgab">Why Egab?</a>
                                        </li>

                                        <li class="nav-item">
                                            <a class="nav-link page-scroll" href="./index.html#sojo">What's Sojo?</a>
                                        </li>

                                        <li class="nav-item">
                                            <a class="nav-link page-scroll" href="./our-works.html">Our Work</a>
                                        </li>

                                    </ul>
                                </div> <!-- navbar collapse -->
                                <div class="navbar-btn d-none d-sm-flex">
                                    <a class="main-btn" href="mailto:dina@egab.co">Contact us</a>
                                </div>
                            </nav>
                        </div> <!-- navigation -->
                    </div>
                </div>
            </div>
        </div>
    </header>
    <!--====== HEADER PART ENDS ======-->

    <!--====== Works PART START ======-->
    <section id="ourWorks" class="business-area pt-120 pb-120">
        <div class="container">
            <div class="">
                <div class="text-left">
                    <div class="section-title">
                    <h1 class="title">Our Work</h1>
                    </div>
                </div>

                <div id="stories">
                    <story-cards />
                </div>
            </div>
        </div>
        <!-- <div class="about-shape-1"></div> -->
        <!-- <div class="about-shape-3"></div> -->
    </section>
    <!--====== works PART ENDS ======-->

    <!--====== jquery js ======-->
    <script src="assets/js/vendor/modernizr-3.6.0.min.js"></script>
    <script src="assets/js/vendor/jquery-3.5.0.js"></script>

    <!--====== Bootstrap js ======-->
    <script src="assets/js/popper.min.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>

    <!--====== Slick js ======-->
    <script src="assets/js/slick.min.js"></script>

    <!--====== wow js ======-->
    <script src="assets/js/wow.js"></script>

    <!--====== Scrolling Nav js ======-->
    <script src="assets/js/scrolling-nav.js"></script>
    <script src="assets/js/jquery.easing.min.js"></script>

    <!--====== odometer js ======-->
    <script src="assets/js/odometer.min.js"></script>
    <script src="assets/js/jquery.appear.min.js"></script>

    <!--====== Magnific Popup js ======-->
    <script src="assets/js/jquery.magnific-popup.min.js"></script>

    <!--====== Main js ======-->
    <script src="assets/js/main.js"></script>
    <script src="./services/stories.js"></script>
    <!-- <script src="./components/StoryCard.js"></script> -->

    <script>
        class StoryCards extends HTMLElement {
            constructor() {
                // always call super here
                super();

                // Element functionality in here
                // Create a shadow root
                const shadow = this.attachShadow({ mode: "open" }); // sets and returns 'this.shadowRoot'

                // create cardGroup
                const cardGroup = document.createElement("div");
                cardGroup.setAttribute("class", "row g-1");

                stories.forEach(story => {
                    const col = cardGroup.appendChild(document.createElement("div"));
                    col.setAttribute("class", "col-sm-6 col-xs-12 col-lg-4 mb-4")

                    const card = col.appendChild(document.createElement("div"));
                    card.setAttribute("class", "card h-100");

                    // image
                    const img = card.appendChild(document.createElement("img"));
                    img.setAttribute("class", "card-img-top");
                    img.src = story.cover ? story.cover : "./mobile-slide.jpg";
                    img.alt = story.title
                    //img.width = this.hasAttribute('image-width') ? this.getAttribute('image-width') : '400'
                    img.height = this.hasAttribute('image-height') ? this.getAttribute('image-height') : '200'

                    // card body
                    const cardBody = card.appendChild(document.createElement("div"));
                    cardBody.setAttribute("class", "card-body");

                    const cardTitle = cardBody.appendChild(document.createElement("h6"));
                    cardTitle.setAttribute("class", "card-title text-center font-weight-bold");
                    const titleLink = cardTitle.appendChild(document.createElement('a'));
                    titleLink.setAttribute('href', story.url)
                    titleLink.textContent = story.title

                    // card text
                    const cardFooter = card.appendChild(document.createElement("div"));
                    cardFooter.setAttribute("class", "card-footer text-center");
                    const link = cardFooter.appendChild(document.createElement('a'));
                    link.setAttribute('href', story.url)
                    const mutedText = link.appendChild(document.createElement('small'));
                    mutedText.setAttribute('class', 'text');
                    mutedText.textContent = 'Visit Story'
                })

                // nesting elements
                shadow.appendChild(cardGroup);

                const linkElem = document.createElement('link');
                linkElem.setAttribute('rel', 'stylesheet');
                linkElem.setAttribute('href', 'assets/css/bootstrap.min.css');

                // Attach the created element to the shadow dom
                shadow.appendChild(linkElem);
            }
            // hooks
            connectedCallback() {
                console.log('Custom square element added to page');
            }

            // disconnectedCallback() {
            //   console.log('Custom square element removed from page.');
            // }

            // adoptedCallback() {
            //   console.log('Custom square element moved to new page.');
            // }

            // attributeChangedCallback(name, oldValue, newValue) {
            //   console.log('Custom square element attributes changed.', name, 'oldValue', oldValue, 'newValue', newValue);
            //   // updateStyle(this);
            // }
            }

            customElements.define("story-cards", StoryCards);
    </script>
</body>
</html>